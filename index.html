<!DOCTYPE html>
<html>
  <head>
    <title>Socket.IO chat</title>
  </head>
  <body>
    <form action="http://localhost:5000/upload/uploadImage" enctype="multipart/form-data" method="POST" id="form" >
			<input type="file"  name="image" />
      <input type="submit" value="Upload image">
		</form>
    <div>

    </div>
    <img src="./static/imgs/Screenshot 2022-08-10 095056.png" alt="">
    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io()
      socket.emit("entryRoom", {idRoom: '123'})
      document.querySelector('input[type="file"]').onchange = function(e){
        console.log(e.target.files)
        const file = e.target.files[0]
        const data = {
          messageInfo: {
            idAuthor: "user123",
            Message: "Xin chao",
            Image: null,
            Time: "1234"
          },
          idRoom: '123'
        }
        socket.emit('sendMessage', data, file, (status) => {
          console.log(status)
        })
      }
      socket.on("receiveMessage", (data, linkFile) => {
        // console.log()
        document.querySelector('div').innerHTML = `
          <p>${JSON.stringify(data)}</p>
          <p>${linkFile}</p>
        `
      })
    </script>
  </body>
</html>