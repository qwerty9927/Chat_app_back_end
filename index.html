<!DOCTYPE html>
<html>
  <head>
    <title>Socket.IO chat</title>
  </head>
  <body>
    <form action="http://localhost:5000/upload/uploadImage" enctype="multipart/form-data" method="POST" id="form" >
			<input type="file"  name="image" />
      <input type="submit" value="Upload image">
		</form>
    <img src="./static/imgs/Screenshot 2022-08-10 095056.png" alt="">
    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io()
      document.querySelector('#form').onsubmit = function(e){
        e.preventDefault()
        console.log(document.querySelector('input[type="file"]').files)
        
        document.querySelector('input[type="file"]').value = null
      }
      document.querySelector('input[type="file"]').onchange = function(e){
        console.log(e.target.files)
        const file = e.target.files[0]
        const data = {
          username: "user",
          messageInfo: "Xin chao",
          idRoom: '123'
        }
        socket.emit('sendMessage', data, file, (status) => {
          console.log(status)
        })
      }
    </script>
  </body>
</html>